package com.huawei.myTest;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import org.apache.commons.lang3.StringUtils;

import java.util.List;

public class Test004 {
    public static void main(String[] args) {
        String userStr1 = "{\"isFirstLogin\":false,\"roles\":[\"admin\"],\"userid\":1,\"token\":\"24ee26b6-5aeb-44c8-8412-e9bd9fc88aaa\",\"expireTime\":1664476708906,\"loginTime\":1664433508906,\"phone\":\"\",\"permissions\":[\"*:*:*\"],\"sysUser\":{\"deptName\":\"金融科技中心\",\"openId\":\"ogtxR5JSbeNSR3JsYaeyRQn6Iepc\",\"roles\":[],\"phonenumber\":\"\",\"admin\":true,\"loginDate\":1626056998000,\"pageSize\":0,\"remark\":\"管理员\",\"delFlag\":\"0\",\"password\":\"$2a$10$XfD2JKGypnh6ylLwXIBn9uK/jjmol6Rh92THlguX1rbyDYLwop26C\",\"loginIp\":\"127.0.0.1\",\"appAvatar\":\"https://139.159.189.113/files/2021/12/13/e27c7ffc-b5a9-4365-bae7-9111d216982f.jpg\",\"email\":\"liangzhongqiang@szcgc.com\",\"nickName\":\"管理员\",\"sex\":\"0\",\"deptId\":106,\"avatar\":\"https://139.159.189.113/files/2021/12/16/d5213eaa-e1d5-4457-9172-f8f621cca3c4.jpeg\",\"dept\":{\"deptName\":\"金融科技中心\",\"orderNum\":\"1\",\"pageSize\":0,\"children\":[],\"deptId\":106,\"params\":{},\"pageNum\":0,\"parentId\":120,\"status\":\"0\"},\"params\":{},\"userName\":\"admin\",\"pageNum\":0,\"userId\":1,\"createBy\":\"admin\",\"ranks\":[{\"rankCode\":\"1606\",\"rankSort\":26,\"pageSize\":0,\"updateTime\":\"2022-03-16 09:49:20\",\"params\":{},\"pageNum\":0,\"createBy\":\"admin\",\"createTime\":\"2022-03-16 09:49:20\",\"rankId\":26,\"updateBy\":\"admin\",\"rankName\":\"项目经理6\"}],\"createTime\":\"2021-07-12 10:29:58\",\"viewFileFlag\":\"0\",\"position\":\"法人经理\",\"userType\":\"00\",\"status\":\"0\"},\"userType\":\"pc\",\"ipaddr\":\"171.83.2.73\",\"username\":\"admin\"}\n";
        String userStr = "{\"isFirstLogin\":false,\"roles\":[\"default\",\"jituanlingdao\",\"PH_zcr\",\"xiangmujingli\",\"user\",\"PH_psry\"],\"userid\":7,\"token\":\"13d6c3d2-fe71-4817-9fe7-821768a4e72b\",\"expireTime\":1664476968116,\"loginTime\":1664433768116,\"phone\":\"13543336308\",\"permissions\":[\"singleBs:invoice:add\",\"projReview:apply:makeReport\",\"singleBs:account:check\",\"singleBs:trade:edit\",\"conference:meet:export\",\"approve:loan\",\"singleBs:account:add\",\"singleBs:invoice:edit\",\"projManage:bview:make\",\"projManage:preview:query\",\"contract:approve:check\",\"singleBs:state:remove\",\"custRegister:projList:add\",\"approve:credCont\",\"singleBs:state:add\",\"conference:myMeet:query\",\"singleBs:apply:check\",\"projManage:preview:check\",\"contract:quotaInfo:upload\",\"conference:meet:query\",\"singleBs:rece:remove\",\"conference:myMeet:check\",\"singleBs:trade:check\",\"projManage:myProject:index\",\"singleBs:rece:edit\",\"singleBs:account:remove\",\"conference:meetGroup:query\",\"custRegister:projList:delete\",\"projManage:preview:make\",\"creditCenter:projectQuota:contract\",\"conference:projectList:query\",\"projManage:bview:edit\",\"repay:register:check\",\"conference:meet:check\",\"approve:singleBusiness\",\"creditCenter:projectQuota:add\",\"singleBs:trade:remove\",\"singleBs:rece:add\",\"creditCenter:fundQuota:index\",\"singleBs:invoice:check\",\"standingBook:business:index\",\"creditCenter:projectQuota:change\",\"projReview:apply:check\",\"riskReport:query\",\"singleBs:accountTypeManage:index\",\"standingBook:amountInformation:index\",\"singleBs:rece:check\",\"projReview:apply:query\",\"singleBs:apply:edit\",\"singleBs:apply:add\",\"contract:quotaInfo:index\",\"creditCenter:fundQuota:check\",\"conference:meet:projList\",\"riskReport:add\",\"singleBs:invoice:import\",\"custRegister:projList:check\",\"contract:creditPro:check\",\"repay:earlySettlement:edit\",\"contract:quotaInfo:edit\",\"riskReport:check\",\"repay:register:edit\",\"creditCenter:projectQuota:check\",\"singleBs:account:edit\",\"custRegister:projList:edit\",\"contract:creditPro:index\",\"creditCenter:projectQuota:index\",\"creditCenter:projectQuota:edit\",\"productControl:regionalPolicy:check\",\"singleBs:accountManage:index\",\"singleBs:state:edit\",\"creditCenter:projectQuota:record\",\"repay:earlySettlement:add\",\"custRegister:projList:query\",\"projReview:apply:uploadReport\",\"repay:import:repaymentTrial\",\"repay:earlySettlement:check\",\"conference:meet:projectList\",\"productControl:regionalPolicy:index\",\"singleBs:trade:add\",\"repay:earlySettlement:remove\",\"singleBs:apply:remove\",\"singleBs:creditInfo:index\",\"singleBs:creditInfo:manage\",\"creditCenter:projectQuota:remove\",\"repay:register:index\",\"projManage:bview:query\",\"standingBook:statistic:index\",\"contract:quotaInfo:check\",\"singleBs:invoice:remove\",\"singleBs:state:check\",\"contract:approve:edit\",\"projManage:bview:check\",\"singleBs:apply:index\",\"conference:projectList:export\",\"custRegister:projList:distribute\",\"repay:earlySettlement:index\"],\"sysUser\":{\"deptName\":\"公司领导\",\"roles\":[{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"user\",\"roleId\":2,\"dataScope\":\"2\",\"params\":{},\"pageNum\":0,\"roleSort\":\"2\",\"roleName\":\"系统用户\",\"status\":\"0\"},{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"default\",\"roleId\":3,\"dataScope\":\"5\",\"params\":{},\"pageNum\":0,\"roleSort\":\"3\",\"roleName\":\"默认角色\",\"status\":\"0\"},{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"xiangmujingli\",\"roleId\":101,\"dataScope\":\"5\",\"params\":{},\"pageNum\":0,\"roleSort\":\"101\",\"roleName\":\"项目经理A\",\"status\":\"0\"},{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"jituanlingdao\",\"roleId\":117,\"dataScope\":\"1\",\"params\":{},\"pageNum\":0,\"roleSort\":\"0\",\"roleName\":\"集团领导\",\"status\":\"0\"},{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"PH_zcr\",\"roleId\":130,\"dataScope\":\"1\",\"params\":{},\"pageNum\":0,\"roleSort\":\"0\",\"roleName\":\"主持人\",\"status\":\"0\"},{\"flag\":false,\"admin\":false,\"pageSize\":0,\"deptCheckStrictly\":false,\"menuCheckStrictly\":false,\"roleKey\":\"PH_psry\",\"roleId\":133,\"dataScope\":\"1\",\"params\":{},\"pageNum\":0,\"roleSort\":\"0\",\"roleName\":\"评审人员\",\"status\":\"0\"}],\"phonenumber\":\"13543336308\",\"admin\":false,\"pageSize\":0,\"delFlag\":\"0\",\"password\":\"$2a$10$XfD2JKGypnh6ylLwXIBn9uK/jjmol6Rh92THlguX1rbyDYLwop26C\",\"loginIp\":\"\",\"email\":\"tangqi@szcgc.com\",\"nickName\":\"汤琪\",\"sex\":\"1\",\"deptId\":2,\"avatar\":\"\",\"dept\":{\"deptName\":\"公司领导\",\"orderNum\":\"1\",\"pageSize\":0,\"children\":[],\"deptId\":2,\"params\":{},\"pageNum\":0,\"parentId\":139,\"status\":\"0\"},\"params\":{},\"userName\":\"tangqi\",\"pageNum\":0,\"userId\":7,\"cushmanType\":\"2\",\"createBy\":\"\",\"ranks\":[],\"viewFileFlag\":\"0\",\"userType\":\"00\",\"status\":\"0\"},\"userType\":\"pc\",\"ipaddr\":\"171.83.2.73\",\"username\":\"tangqi\"}\n";
//        System.out.println(userStr);
        JSONObject obj = JSONObject.parseObject(userStr);
//        System.out.println(obj);
        String sysUser = "";
        sysUser = obj.getString("sysUser");
//        System.out.println(sysUser);
        JSONObject sysUserJson = JSONObject.parseObject(sysUser);
        String dept = sysUserJson.getString("dept");
//        Object roles = obj.get("roles");
//        String s = roles.toString();
//        System.out.println(s);
        String roles1 = JSONObject.toJSONString(obj.get("roles"));
        System.out.println(roles1);
        List<String> roles = JSONArray.parseArray(JSONObject.toJSONString(obj.get("roles")), String.class);
        System.out.println(roles);

        String s = StringUtils.join(roles, ",");
        System.out.println(s);
        String ss = "";

    }
}
